<WindowManager>:
    WelcomeScreen:
    LoginScreen:
    RegisterScreen:

<WelcomeScreen>:
    name: 'welcome'
    FloatLayout:
        Image:
            source: 'AppKivyMD/Images/fondo.jpeg'
            allow_stretch: True
            keep_ratio: False
            size_hint: 1, 1
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}

        # Título
        Label:
            text: "Bienvenido"
            font_size: '32sp'
            pos_hint: {"center_x": 0.5, "center_y": 0.7}
            color: 0, 0, 0, 1

        # Descripción
        Label:
            text: "Aprenda a relajarse con sesiones guiadas y a dormir mejor con sonidos.\nMedite para descubrir su yo interior."
            halign: "center"
            font_size: '16sp'
            text_size: self.width * 0.8, None  # Ajuste al 80% del ancho del contenedor
            size_hint: (0.8, None)
            height: self.texture_size[1]
            pos_hint: {"center_x": 0.5, "center_y": 0.55}
            color: 0, 0, 0, 1

        BoxLayout:
            orientation: 'vertical'
            size_hint: 0.7, 0.4
            pos_hint: {"center_x": 0.5, "center_y": 0.3}
            spacing: '10dp'  # Espacio entre los botones

            Button:
                text: "Regístrate"
                size_hint: 1, None
                height: 50
                background_normal: ""
                background_color: (0.2, 0.6, 0.8, 1)  # Color de fondo
                on_release:
                    app.root.current = 'register'
                    app.root.transition.direction = 'left'
                canvas.before:
                    Color:
                        rgba: (0.2, 0.6, 0.8, 1)
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: (20, 20, 20, 20)

            Button:
                text: "Inicie sesión"
                size_hint: 1, None
                height: 50
                background_normal: ""
                background_color: (0, 0.47, 1, 1)
                on_release:
                    app.root.current = 'login'
                    app.root.transition.direction = 'left'
                canvas.before:
                    Color:
                        rgba: (0, 0.47, 1, 1)
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [20, 20, 20, 20]

            Button:
                text: "Continuar sin registrarse"
                size_hint: 1, None
                height: 50
                background_normal: ""
                background_color: (0.2, 0.6, 0.8, 1)
                on_release:
                    app.on_continue_without_register()
                canvas.before:
                    Color:
                        rgba: (0.2, 0.6, 0.8, 1)
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [20, 20, 20, 20]

        Label:
            text: "Al tocar Registrarse, Iniciar sesión o Continuar sin registrarse,\naceptas nuestros Términos de uso y nuestra Política de privacidad."
            halign: "center"
            text_size: self.width * 0.9, None
            font_size: "12sp"
            size_hint: (0.9, None)
            height: self.texture_size[1]
            pos_hint: {"center_x": 0.5, "center_y": 0.05}
            color: 0, 0, 0, 1

<RegisterScreen>:
    name: 'register'
    FloatLayout:
        Image:
            source: 'AppKivyMD/Images/fondo.jpeg'
            allow_stretch: True
            keep_ratio: False
            size_hint: 1, 1
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            
        Label:
            text: "Registro"
            font_size: '32sp'
            pos_hint: {"center_x": 0.5, "center_y": 0.85}
            color: 0, 0, 0, 1

        TextInput:
            id: fullname_input
            hint_text: "Nombre completo"
            size_hint: (0.8, None)
            height: 50
            pos_hint: {"center_x": 0.5, "center_y": 0.7}
            multiline: False
            background_color: (1, 1, 1, 1)
            foreground_color: (0, 0, 0, 1)

        Label:
            id: fullname_error
            text: ""
            color: 1, 0, 0, 1  # Color rojo para los errores
            font_size: '12sp'
            size_hint: (0.8, None)
            pos_hint: {"center_x": 0.5, "center_y": 0.65}

        TextInput:
            id: username_input
            hint_text: "Correo electrónico"
            size_hint: (0.8, None)
            height: 50
            pos_hint: {"center_x": 0.5, "center_y": 0.6}
            multiline: False
            background_color: (1, 1, 1, 1)
            foreground_color: (0, 0, 0, 1)

        Label:
            id: email_error
            text: ""
            color: 1, 0, 0, 1  # Color rojo para los errores
            font_size: '12sp'
            size_hint: (0.8, None)
            pos_hint: {"center_x": 0.5, "center_y": 0.55}

        TextInput:
            id: password_input
            hint_text: "Contraseña"
            size_hint: (0.8, None)
            height: 50
            pos_hint: {"center_x": 0.5, "center_y": 0.5}
            multiline: False
            password: True
            background_color: (1, 1, 1, 1)
            foreground_color: (0, 0, 0, 1)

        Label:
            id: password_error
            text: ""
            color: 1, 0, 0, 1
            font_size: '12sp'
            size_hint: (0.8, None)
            pos_hint: {"center_x": 0.5, "center_y": 0.45}

        TextInput:
            id: confirm_password_input
            hint_text: "Confirmar contraseña"
            size_hint: (0.8, None)
            height: 50
            pos_hint: {"center_x": 0.5, "center_y": 0.4}
            multiline: False
            password: True
            background_color: (1, 1, 1, 1)
            foreground_color: (0, 0, 0, 1)

        Label:
            id: confirm_password_error
            text: ""
            color: 1, 0, 0, 1
            font_size: '12sp'
            size_hint: (0.8, None)
            pos_hint: {"center_x": 0.5, "center_y": 0.35}

        Button:
            text: "Registrarse"
            size_hint: (0.8, None)
            height: 50
            pos_hint: {"center_x": 0.5, "center_y": 0.25}
            background_normal: ""
            background_color: (0, 0.47, 1, 1)
            on_release:
                app.on_register()
            canvas.before:
                Color:
                    rgba: (0, 0.47, 1, 1)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [20, 20, 20, 20]

        Button:
            text: "Atrás"
            color: 0, 0.75, 1, 1  # Color del texto (celeste)
            font_size: '16sp'
            size_hint: (None, None)
            size: self.texture_size
            pos_hint: {"center_x": 0.5, "center_y": 0.15}
            background_normal: ''  # Elimina el fondo del botón
            background_down: ''  # Elimina el fondo al presionar
            background_color: (0, 0, 0, 0)  # Color de fondo transparente
            on_release:
                app.root.current = 'welcome'
                app.root.transition.direction = 'right'


<LoginScreen>:
    name: 'login'
    FloatLayout:
        Image:
            source: 'AppKivyMD/Images/fondo.jpeg'
            allow_stretch: True
            keep_ratio: False
            size_hint: 1, 1
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            
        Label:
            text: "Inicio De Sesion"
            font_size: '32sp'
            pos_hint: {"center_x": 0.5, "center_y": 0.75}
            color: 0, 0, 0, 1

        TextInput:
            id: username_input
            hint_text: "Correo electrónico"
            size_hint: (0.8, None)
            height: 50
            pos_hint: {"center_x": 0.5, "center_y": 0.6}
            multiline: False
            background_color: (1, 1, 1, 1)
            foreground_color: (0, 0, 0, 1)

        Label:
            id: email_error
            text: ""
            color: 1, 0, 0, 1  # Color rojo para los errores
            font_size: '12sp'
            size_hint: (0.8, None)
            pos_hint: {"center_x": 0.5, "center_y": 0.55}

        TextInput:
            id: password_input
            hint_text: "Contraseña"
            size_hint: (0.8, None)
            height: 50
            pos_hint: {"center_x": 0.5, "center_y": 0.5}
            multiline: False
            password: True
            background_color: (1, 1, 1, 1)
            foreground_color: (0, 0, 0, 1)

        Label:
            id: password_error
            text: ""
            color: 1, 0, 0, 1
            font_size: '12sp'
            size_hint: (0.8, None)
            pos_hint: {"center_x": 0.5, "center_y": 0.45}

        Button:
            text: "Iniciar Sesión"
            size_hint: (0.8, None)
            height: 50
            pos_hint: {"center_x": 0.5, "center_y": .33}
            background_normal: ""
            background_color: (0, 0.47, 1, 1)
            on_release:
                app.on_login()  # Cambiar a 'on_login'
            canvas.before:
                Color:
                    rgba: (0, 0.47, 1, 1)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [20, 20, 20, 20]

        Button:
            text: "Atrás"
            color: 0, 0.75, 1, 1  # Color del texto (celeste)
            font_size: '16sp'
            size_hint: (None, None)
            size: self.texture_size
            pos_hint: {"center_x": 0.5, "center_y": 0.25}
            background_normal: ''  # Elimina el fondo del botón
            background_down: ''  # Elimina el fondo al presionar
            background_color: (0, 0, 0, 0)  # Color de fondo transparente
            on_release:
                app.root.current = 'welcome'
                app.root.transition.direction = 'right'


                